# Protocol: Code Philosophy (代码哲学)

本协议定义了贯穿所有项目的核心设计哲学，是最高级别的全局约束。

---

## 核心支柱

### 1. 单一职责 (SRP)

- 每个函数、类、模块只承担一个明确的职责。
- 职责变更应该只影响一个模块。

### 2. 熵减治理 (Entropy Reduction)

- **Subtraction > Addition**: 删除代码比写代码更有价值。
- **300-500 Rule**: 单文件超过 300 行预警，超过 500 行禁止提交。
- **Zero Legacy**: 发现技术债立即清理，禁止 "TODO later"。

### 3. 全量日志系统 (Logging)

- 捕获所有关键操作、状态变更和异常。
- 日志级别分层: `DEBUG`, `INFO`, `WARN`, `ERROR`。
- 后台可控开关，定期清理，敏感脱敏。

### 4. 统一通知系统 (Notification)
>
> 通知 = 需要用户确认/选择的阻断性交互。

- 只有真正需要用户决策的场景才用通知。
- 所有确认操作汇聚到 `NotificationManager`。

### 5. 全交互反馈系统 (Feedback)
>
> 反馈 = 非阻断性消息，告诉用户"系统收到了"。

- **即时反馈**: 操作后 100ms 内必须有视觉反馈。
- **过程反馈**: 长时间操作必须有进度指示。
- **结果反馈**: 操作完成后 Toast 提示成功/失败。

---

## 检查清单

- [ ] 这个模块是否只做一件事？
- [ ] 这次修改是否删除了无用代码？
- [ ] 关键操作是否都有日志记录？
- [ ] 需要确认的操作是否走统一通知？
- [ ] 用户的每个操作是否都有反馈？
